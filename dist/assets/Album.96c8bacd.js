import{d as t,k as a,a as e,o as s,e as l,f as n,t as i,F as o,y as c,B as r,m as u,M as d,p,i as m,l as g,w as b,n as y}from"./vendor.c2d8d5d1.js";import{d as f,P as v,u as h,a as x,A as k}from"./index.e3161dfb.js";var P=t({name:"SongItem",props:{song:Object},emits:["playsong"],setup(t,{emit:s}){const l=a();const n=e((()=>{var a;return(null==(a=l.state.currentSong)?void 0:a.encodeId)===t.song.encodeId})),i=e((()=>n.value&&l.state.playerState===v.PLAYING));return{displayDuration:f,playSong:function(){var a;console.log("dbclick"),(null==(a=l.state.currentSong)?void 0:a.encodeId)!==t.song.encodeId?s("playsong",t.song):l.commit("togglePlay")},isCurrent:n,isPlaying:i}}});const S={class:"flex items-center flex-1 space-x-2"},w={class:"relative w-10 h-10 overflow-hidden rounded"},I={class:"w-5 h-5 mx-auto text-white"},j={class:"text-sm font-semibold text-primary"},C={class:"text-xs text-secondary"},A={key:0},L={class:"flex flex-1 space-x-2"},D={class:"flex items-center flex-1 text-xs text-primary"},N={key:0,class:"inline-flex items-center justify-center w-8 h-8 rounded-full focus:outline-none hover:bg-alpha text-primary"},G=n("i",{class:"flex icon ic-mv"},null,-1),E={key:1,class:"inline-flex items-center justify-center w-8 h-8 rounded-full focus:outline-none hover:bg-alpha text-primary"},M=n("i",{class:"flex icon ic-karaoke"},null,-1),U=n("button",{class:"inline-flex items-center justify-center w-8 h-8 rounded-full focus:outline-none hover:bg-alpha text-primary"},[n("i",{class:"flex icon ic-like"})],-1),Y=n("button",{class:"inline-flex items-center justify-center w-8 h-8 rounded-full focus:outline-none hover:bg-alpha text-primary"},[n("i",{class:"flex icon ic-more"})],-1);P.render=function(t,a,e,d,p,m){return s(),l("div",{onDblclick:a[2]||(a[2]=(...a)=>t.playSong&&t.playSong(...a)),class:["flex items-center justify-between p-2 border-t border-solid cursor-pointer hover:bg-alpha border-alpha",t.isCurrent&&"bg-alpha"]},[n("div",S,[n("div",w,[n("img",{src:t.song.thumbnail,alt:"thumbnail"},null,8,["src"]),n("div",{class:["absolute inset-0 bg-black bg-opacity-40",!t.isCurrent&&"opacity-0 hover:opacity-100"]},[n("button",{onClick:a[1]||(a[1]=(...a)=>t.playSong&&t.playSong(...a)),class:"flex w-full h-full place-items-center"},[n("span",I,[n("i",{class:["flex justify-center icon",t.isPlaying?"ic-gif-playing-white":"ic-play"]},null,2)])])],2)]),n("div",null,[n("h4",j,i(t.song.title),1),n("p",C,[(s(!0),l(o,null,c(t.song.artists,((a,e)=>(s(),l("span",{key:a.name},[r(i(a.name)+" ",1),e!==t.song.artists.length-1?(s(),l("span",A,",")):u("",!0)])))),128))])])]),n("div",L,[n("div",D,[n("span",null,i(t.displayDuration(t.song.duration,2)),1)]),t.song.mvlink?(s(),l("button",N,[G])):u("",!0),t.song.hasLyric?(s(),l("button",E,[M])):u("",!0),U,Y])],34)};var _=t({name:"PageAlbum",components:{SongItem:P},setup(){const t=a(),s=d(),l=e((()=>t.state.isPlaying===v.PLAYING)),n=s.params.id,{data:i,exec:o,status:c}=h("fetchPlaylist",x);return o(n),{album:i,isPlaying:l,togglePlay:function(){t.commit("togglePlay")},status:c,ApiStatus:k,playsong:function(a){t.state.playlist&&t.state.playlist.encodeId===i.encodeId||t.commit("setState",{prop:"playlist",value:i.value}),t.commit("setState",{prop:"currentSong",value:a})}}}});const B=b();p("data-v-929b61c0");const F={class:"album-page"},O={key:0},q={class:"album-info"},z={class:"sticky top-0"},H={class:"overlay"},J={class:"btn-play"},K={class:"album-title"},Q={class:"mt-1 album-info"},R={class:"album-info"},T=y('<button class="btn-action" data-v-929b61c0><i class="flex w-5 h-5 place-items-center icon ic-play" data-v-929b61c0></i><span data-v-929b61c0>Phát ngẫu nhiên</span></button><div class="album-footer" data-v-929b61c0><button data-v-929b61c0><i class="icon ic-like" data-v-929b61c0></i></button><button data-v-929b61c0><i class="icon ic-more" data-v-929b61c0></i></button></div>',2),V={class:"album-content"},W={class:"description"},X={class:"mt-4"};m();const Z=B(((t,a,e,r,d,p)=>{const m=g("song-item");return s(),l("div",F,[t.status===t.ApiStatus.PENDING?(s(),l("h4",O,"Loading...")):u("",!0),t.status===t.ApiStatus.SUCCESS?(s(),l(o,{key:1},[n("div",q,[n("div",z,[n("div",{onClick:a[1]||(a[1]=(...a)=>t.togglePlay&&t.togglePlay(...a)),class:["album-cover",{rotate:t.isPlaying}]},[n("img",{src:t.album.thumbnailM,alt:t.album.title},null,8,["src","alt"]),n("div",H,[n("button",J,[n("i",{class:["icon",t.isPlaying?"ic-gif-playing-white":"ic-play"]},null,2)])])],2),n("h1",K,i(t.album.title),1),n("p",Q,"Cập nhật: "+i(new Date(1e3*t.album.contentLastUpdate).toLocaleDateString()),1),n("p",R,i(t.album.like)+" Người yêu thích",1),T])]),n("div",V,[n("p",W,"Lời tựa: "+i(t.album.description),1),n("div",X,[(s(!0),l(o,null,c(t.album.song.items,(a=>(s(),l(m,{key:a.title,song:a,onPlaysong:t.playsong},null,8,["song","onPlaysong"])))),128))])])],64)):u("",!0)])}));_.render=Z,_.__scopeId="data-v-929b61c0";export default _;
